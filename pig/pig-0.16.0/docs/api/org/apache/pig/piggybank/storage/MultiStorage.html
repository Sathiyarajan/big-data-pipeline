<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_71) on Wed Jun 01 23:11:17 PDT 2016 -->
<title>MultiStorage (Pig 0.16.0 API)</title>
<meta name="date" content="2016-06-01">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="MultiStorage (Pig 0.16.0 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MultiStorage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/pig/piggybank/storage/JsonMetadata.html" title="class in org.apache.pig.piggybank.storage"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/apache/pig/piggybank/storage/MultiStorage.MultiStorageOutputFormat.html" title="class in org.apache.pig.piggybank.storage"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/pig/piggybank/storage/MultiStorage.html" target="_top">Frames</a></li>
<li><a href="MultiStorage.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.pig.piggybank.storage</div>
<h2 title="Class MultiStorage" class="title">Class MultiStorage</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../../org/apache/pig/StoreFunc.html" title="class in org.apache.pig">org.apache.pig.StoreFunc</a></li>
<li>
<ul class="inheritance">
<li>org.apache.pig.piggybank.storage.MultiStorage</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../org/apache/pig/StoreFuncInterface.html" title="interface in org.apache.pig">StoreFuncInterface</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">MultiStorage</span>
extends <a href="../../../../../org/apache/pig/StoreFunc.html" title="class in org.apache.pig">StoreFunc</a></pre>
<div class="block">The UDF is useful for splitting the output data into a bunch of directories
 and files dynamically based on user specified key field in the output tuple.
 
 Sample usage: <code>
 A = LOAD 'mydata' USING PigStorage() as (a, b, c);
 STORE A INTO '/my/home/output' USING MultiStorage('/my/home/output','0', 'bz2', '\\t');
 </code> Parameter details:- ========== <b>/my/home/output </b>(Required) :
 The DFS path where output directories and files will be created. <b> 0
 </b>(Required) : Index of field whose values should be used to create
 directories and files( field 'a' in this case). <b>'bz2' </b>(Optional) : The
 compression type. Default is 'none'. Supported types are:- 'none', 'gz' and
 'bz2' <b> '\\t' </b>(Optional) : Output field separator.
 
 Let 'a1', 'a2' be the unique values of field 'a'. Then output may look like
 this
 
 /my/home/output/a1/a1-0000 /my/home/output/a1/a1-0001
 /my/home/output/a1/a1-0002 ... /my/home/output/a2/a2-0000
 /my/home/output/a2/a2-0001 /my/home/output/a2/a2-0002
 
 The prefix '0000*' is the task-id of the mapper/reducer task executing this
 store. In case user does a GROUP BY on the field followed by MultiStorage(),
 then its imperative that all tuples for a particular group will go exactly to
 1 reducer. So in the above case for e.g. there will be only 1 file each under
 'a1' and 'a2' directories.
 
 If the output is compressed,then the sub directories and the output files will
 be having the extension. Say for example in the above case if bz2 is used one file 
 will look like ;/my/home/output.bz2/a1.bz2/a1-0000.bz2</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/pig/piggybank/storage/MultiStorage.MultiStorageOutputFormat.html" title="class in org.apache.pig.piggybank.storage">MultiStorage.MultiStorageOutputFormat</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../org/apache/pig/piggybank/storage/MultiStorage.html#MultiStorage(java.lang.String,%20java.lang.String)">MultiStorage</a></strong>(<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;parentPathStr,
            <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;splitFieldIndex)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../../org/apache/pig/piggybank/storage/MultiStorage.html#MultiStorage(java.lang.String,%20java.lang.String,%20java.lang.String)">MultiStorage</a></strong>(<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;parentPathStr,
            <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;splitFieldIndex,
            <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;compression)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../org/apache/pig/piggybank/storage/MultiStorage.html#MultiStorage(java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String)">MultiStorage</a></strong>(<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;parentPathStr,
            <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;splitFieldIndex,
            <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;compression,
            <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;fieldDel)</code>
<div class="block">Constructor</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>org.apache.hadoop.mapreduce.OutputFormat</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/pig/piggybank/storage/MultiStorage.html#getOutputFormat()">getOutputFormat</a></strong>()</code>
<div class="block">Return the OutputFormat associated with StoreFunc.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/pig/piggybank/storage/MultiStorage.html#prepareToWrite(org.apache.hadoop.mapreduce.RecordWriter)">prepareToWrite</a></strong>(org.apache.hadoop.mapreduce.RecordWriter&nbsp;writer)</code>
<div class="block">Initialize StoreFunc to write data.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/pig/piggybank/storage/MultiStorage.html#putNext(org.apache.pig.data.Tuple)">putNext</a></strong>(<a href="../../../../../org/apache/pig/data/Tuple.html" title="interface in org.apache.pig.data">Tuple</a>&nbsp;tuple)</code>
<div class="block">Write a tuple to the data store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/pig/piggybank/storage/MultiStorage.html#setStoreLocation(java.lang.String,%20org.apache.hadoop.mapreduce.Job)">setStoreLocation</a></strong>(<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;location,
                org.apache.hadoop.mapreduce.Job&nbsp;job)</code>
<div class="block">Communicate to the storer the location where the data needs to be stored.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Boolean.html?is-external=true" title="class or interface in java.lang">Boolean</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../org/apache/pig/piggybank/storage/MultiStorage.html#supportsParallelWriteToStoreLocation()">supportsParallelWriteToStoreLocation</a></strong>()</code>
<div class="block">DAG execution engines like Tez support optimizing union by writing to
 output location in parallel from tasks of different vertices.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.apache.pig.StoreFunc">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.pig.<a href="../../../../../org/apache/pig/StoreFunc.html" title="class in org.apache.pig">StoreFunc</a></h3>
<code><a href="../../../../../org/apache/pig/StoreFunc.html#checkSchema(org.apache.pig.ResourceSchema)">checkSchema</a>, <a href="../../../../../org/apache/pig/StoreFunc.html#cleanupOnFailure(java.lang.String,%20org.apache.hadoop.mapreduce.Job)">cleanupOnFailure</a>, <a href="../../../../../org/apache/pig/StoreFunc.html#cleanupOnFailureImpl(java.lang.String,%20org.apache.hadoop.mapreduce.Job)">cleanupOnFailureImpl</a>, <a href="../../../../../org/apache/pig/StoreFunc.html#cleanupOnSuccess(java.lang.String,%20org.apache.hadoop.mapreduce.Job)">cleanupOnSuccess</a>, <a href="../../../../../org/apache/pig/StoreFunc.html#relToAbsPathForStoreLocation(java.lang.String,%20org.apache.hadoop.fs.Path)">relToAbsPathForStoreLocation</a>, <a href="../../../../../org/apache/pig/StoreFunc.html#setStoreFuncUDFContextSignature(java.lang.String)">setStoreFuncUDFContextSignature</a>, <a href="../../../../../org/apache/pig/StoreFunc.html#warn(java.lang.String,%20java.lang.Enum)">warn</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="MultiStorage(java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MultiStorage</h4>
<pre>public&nbsp;MultiStorage(<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;parentPathStr,
            <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;splitFieldIndex)</pre>
</li>
</ul>
<a name="MultiStorage(java.lang.String, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MultiStorage</h4>
<pre>public&nbsp;MultiStorage(<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;parentPathStr,
            <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;splitFieldIndex,
            <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;compression)</pre>
</li>
</ul>
<a name="MultiStorage(java.lang.String, java.lang.String, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MultiStorage</h4>
<pre>public&nbsp;MultiStorage(<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;parentPathStr,
            <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;splitFieldIndex,
            <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;compression,
            <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;fieldDel)</pre>
<div class="block">Constructor</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>parentPathStr</code> - Parent output dir path (this will be specified in store statement,
            so MultiStorage don't use this parameter in reality. However, we don't
            want to change the construct to break backward compatibility)</dd><dd><code>splitFieldIndex</code> - key field index</dd><dd><code>compression</code> - 'bz2', 'bz', 'gz' or 'none'</dd><dd><code>fieldDel</code> - Output record field delimiter.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="putNext(org.apache.pig.data.Tuple)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>putNext</h4>
<pre>public&nbsp;void&nbsp;putNext(<a href="../../../../../org/apache/pig/data/Tuple.html" title="interface in org.apache.pig.data">Tuple</a>&nbsp;tuple)
             throws <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../../org/apache/pig/StoreFunc.html#putNext(org.apache.pig.data.Tuple)">StoreFunc</a></code></strong></div>
<div class="block">Write a tuple to the data store.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/pig/StoreFuncInterface.html#putNext(org.apache.pig.data.Tuple)">putNext</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/pig/StoreFuncInterface.html" title="interface in org.apache.pig">StoreFuncInterface</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/pig/StoreFunc.html#putNext(org.apache.pig.data.Tuple)">putNext</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../org/apache/pig/StoreFunc.html" title="class in org.apache.pig">StoreFunc</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>tuple</code> - the tuple to store.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if an exception occurs during the write</dd></dl>
</li>
</ul>
<a name="getOutputFormat()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOutputFormat</h4>
<pre>public&nbsp;org.apache.hadoop.mapreduce.OutputFormat&nbsp;getOutputFormat()
                                                         throws <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../../org/apache/pig/StoreFunc.html#getOutputFormat()">StoreFunc</a></code></strong></div>
<div class="block">Return the OutputFormat associated with StoreFunc.  This will be called
 on the front end during planning and on the backend during
 execution.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/pig/StoreFuncInterface.html#getOutputFormat()">getOutputFormat</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/pig/StoreFuncInterface.html" title="interface in org.apache.pig">StoreFuncInterface</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/pig/StoreFunc.html#getOutputFormat()">getOutputFormat</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../org/apache/pig/StoreFunc.html" title="class in org.apache.pig">StoreFunc</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the <code>OutputFormat</code> associated with StoreFunc</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if an exception occurs while constructing the
 OutputFormat</dd></dl>
</li>
</ul>
<a name="prepareToWrite(org.apache.hadoop.mapreduce.RecordWriter)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepareToWrite</h4>
<pre>public&nbsp;void&nbsp;prepareToWrite(org.apache.hadoop.mapreduce.RecordWriter&nbsp;writer)
                    throws <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../../org/apache/pig/StoreFunc.html#prepareToWrite(org.apache.hadoop.mapreduce.RecordWriter)">StoreFunc</a></code></strong></div>
<div class="block">Initialize StoreFunc to write data.  This will be called during
 execution on the backend before the call to putNext.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/pig/StoreFuncInterface.html#prepareToWrite(org.apache.hadoop.mapreduce.RecordWriter)">prepareToWrite</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/pig/StoreFuncInterface.html" title="interface in org.apache.pig">StoreFuncInterface</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/pig/StoreFunc.html#prepareToWrite(org.apache.hadoop.mapreduce.RecordWriter)">prepareToWrite</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../org/apache/pig/StoreFunc.html" title="class in org.apache.pig">StoreFunc</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>writer</code> - RecordWriter to use.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if an exception occurs during initialization</dd></dl>
</li>
</ul>
<a name="setStoreLocation(java.lang.String, org.apache.hadoop.mapreduce.Job)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setStoreLocation</h4>
<pre>public&nbsp;void&nbsp;setStoreLocation(<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;location,
                    org.apache.hadoop.mapreduce.Job&nbsp;job)
                      throws <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../../org/apache/pig/StoreFunc.html#setStoreLocation(java.lang.String,%20org.apache.hadoop.mapreduce.Job)">StoreFunc</a></code></strong></div>
<div class="block">Communicate to the storer the location where the data needs to be stored.
 The location string passed to the <a href="../../../../../org/apache/pig/StoreFunc.html" title="class in org.apache.pig"><code>StoreFunc</code></a> here is the
 return value of <a href="../../../../../org/apache/pig/StoreFunc.html#relToAbsPathForStoreLocation(java.lang.String,%20org.apache.hadoop.fs.Path)"><code>StoreFunc.relToAbsPathForStoreLocation(String, Path)</code></a>
 This method will be called in the frontend and backend multiple times. Implementations
 should bear in mind that this method is called multiple times and should
 ensure there are no inconsistent side effects due to the multiple calls.
 <a href="../../../../../org/apache/pig/StoreFunc.html#checkSchema(org.apache.pig.ResourceSchema)"><code>StoreFunc.checkSchema(ResourceSchema)</code></a> will be called before any call to
 <a href="../../../../../org/apache/pig/StoreFunc.html#setStoreLocation(java.lang.String,%20org.apache.hadoop.mapreduce.Job)"><code>StoreFunc.setStoreLocation(String, Job)</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/pig/StoreFuncInterface.html#setStoreLocation(java.lang.String,%20org.apache.hadoop.mapreduce.Job)">setStoreLocation</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../org/apache/pig/StoreFuncInterface.html" title="interface in org.apache.pig">StoreFuncInterface</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../org/apache/pig/StoreFunc.html#setStoreLocation(java.lang.String,%20org.apache.hadoop.mapreduce.Job)">setStoreLocation</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../org/apache/pig/StoreFunc.html" title="class in org.apache.pig">StoreFunc</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>location</code> - Location returned by
 <a href="../../../../../org/apache/pig/StoreFunc.html#relToAbsPathForStoreLocation(java.lang.String,%20org.apache.hadoop.fs.Path)"><code>StoreFunc.relToAbsPathForStoreLocation(String, Path)</code></a></dd><dd><code>job</code> - The <code>Job</code> object</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://download.oracle.com/javase/1.5.0/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if the location is not valid.</dd></dl>
</li>
</ul>
<a name="supportsParallelWriteToStoreLocation()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>supportsParallelWriteToStoreLocation</h4>
<pre>public&nbsp;<a href="http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Boolean.html?is-external=true" title="class or interface in java.lang">Boolean</a>&nbsp;supportsParallelWriteToStoreLocation()</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../../org/apache/pig/StoreFunc.html#supportsParallelWriteToStoreLocation()">StoreFunc</a></code></strong></div>
<div class="block">DAG execution engines like Tez support optimizing union by writing to
 output location in parallel from tasks of different vertices. Commit is
 called once all the vertices in the union are complete. This eliminates
 need to have a separate phase to read data output from previous phases,
 union them and write out again.

 Enabling the union optimization requires the OutputFormat to

      1) Support creation of different part file names for tasks of different
 vertices. Conflicting filenames can create data corruption and loss.
 For eg: If task 0 of vertex1 and vertex2 both create filename as
 part-r-00000, then one of the files will be overwritten when promoting
 from temporary to final location leading to data loss.
      FileOutputFormat has mapreduce.output.basename config which enables
  naming files differently in different vertices. Classes extending
  FileOutputFormat and those prefixing file names with mapreduce.output.basename
  value will not encounter conflict. Cases like HBaseStorage which write to key
  value store and do not produce files also should not face any conflict.

      2) Support calling of commit once at the end takes care of promoting
 temporary files of the different vertices into the final location.
 For eg: FileOutputFormat commit algorithm handles promoting of files produced
 by tasks of different vertices into final output location without issues
 if there is no file name conflict. In cases like HBaseStorage, the
 TableOutputCommitter does nothing on commit.

 If custom OutputFormat used by the StoreFunc does not support the above
 two criteria, then false should be returned. Union optimization will be
 disabled for the StoreFunc.

 Default implementation returns null and in that case planner falls back
 to <code>PigConfiguration.PIG_TEZ_OPT_UNION_SUPPORTED_STOREFUNCS</code> and
 <code>PigConfiguration.PIG_TEZ_OPT_UNION_UNSUPPORTED_STOREFUNCS</code>
 settings to determine if the StoreFunc supports it.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../../org/apache/pig/StoreFunc.html#supportsParallelWriteToStoreLocation()">supportsParallelWriteToStoreLocation</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../org/apache/pig/StoreFunc.html" title="class in org.apache.pig">StoreFunc</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MultiStorage.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/pig/piggybank/storage/JsonMetadata.html" title="class in org.apache.pig.piggybank.storage"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../org/apache/pig/piggybank/storage/MultiStorage.MultiStorageOutputFormat.html" title="class in org.apache.pig.piggybank.storage"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/pig/piggybank/storage/MultiStorage.html" target="_top">Frames</a></li>
<li><a href="MultiStorage.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &copy; 2007-2012 The Apache Software Foundation</small></p>
</body>
</html>
